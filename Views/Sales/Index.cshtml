@model IEnumerable<SkyFan.Models.Sale>

@{
    ViewBag.Title = "Index";
}

<h2>Sales List
    <button type="submit" rel="tooltip" title="New Sale" class="btn btn-primary btn-round btn-just-icon " onclick="location.href='@Url.Action("Create", "Sales")'">
        <i class="material-icons">playlist_add</i>
        <div class="ripple-container"></div>
    </button>
    </h2>


<div class="row">

    <div class="col-md-5">
        @using (Html.BeginForm())
        {

            <div class="form-inline  label-floating">

                <label class="control-label"> Names or Products</label>
                @Html.TextBox("SearchString", null, new { @class = "form-control" })
                @*<input type="submit" value="Search" class="btn btn-success" />*@
                <button type="submit" rel="tooltip" title="Search" class="btn btn-primary btn-round btn-just-icon">
                    <i class="material-icons">search</i>
                    <div class="ripple-container"></div>
                </button>
            </div>
        }
    </div>

    <div class="col-md-7 ">
        @using (Html.BeginForm())
        {
            <div class=" form-inline  ">
                <div class="col-md-5 ">
                    <label class="control-label">
                        Start Date:
                    </label>
                    @Html.TextBox("d1", null, new { @class = "form-control ", @type = "date" })
                </div>

                <div class="col-md-7 ">
                    <label class="control-label">
                        End Date:
                    </label>
                    @Html.TextBox("d2", null, new { @class = "form-control ", @type = "date" })
                    <button type="submit" rel="tooltip" title="Search" class="btn btn-primary btn-round btn-just-icon">
                        <i class="material-icons">search</i>
                        <div class="ripple-container"></div>
                    </button>
                </div>
            </div>
        }


    </div>
</div>




<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.DealerProduct.Dealer.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DealerProduct.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Date)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Quantity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Total)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.AmountToPay)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Balance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PaymentVia)
        </th>
        
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.DealerProduct.Dealer.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DealerProduct.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Quantity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Total)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.AmountToPay)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Balance)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PaymentVia)
        </td>
        
        <td>
            <button type="button" rel="tooltip" title="Edit" class="btn btn-primary btn-simple btn-xs" onclick="location.href='@Url.Action("Edit", "Sales" , new { id=item.ID })'">
                <i class="material-icons">edit</i>
            </button>

            <button type="button" rel="tooltip" title="Details" class="btn btn-success btn-simple btn-xs" onclick="location.href='@Url.Action("Details", "Sales" , new { id=item.ID })'">
                <i class="material-icons">list</i>
            </button>
            <button type="button" rel="tooltip" title="Delete" class="btn btn-danger btn-simple btn-xs" onclick="location.href='@Url.Action("Delete", "Sales" , new { id=item.ID })'">
                <i class="material-icons">close</i>
            </button>
        </td>
    </tr>
}
    <tfoot>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="h3">@ViewBag.balance</td>
        </tr>
    </tfoot>

</table>

<script src="~/Scripts/jquery-1.10.2.js"></script>
<script>
    $(function () {


        $("#d2").change(function () {
            var startDate = document.getElementById("d1").value;
            var endDate = document.getElementById("d2").value;

            if ((Date.parse(startDate) > Date.parse(endDate))) {

                var notify = $.notify('<strong>Date Input Error </strong> End date should be greater than start date. ', {
                    type: 'danger',
                    allow_dismiss: true,
                    
                });

                document.getElementById("d2").value = "";
            }
        });
    })
</script>